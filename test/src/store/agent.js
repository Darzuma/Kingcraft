const sorts = [
        [0,1,0,2,0,1,0,1,2,0,3,0,4,4,4,4,4,4,4,4,4,3,0,3,0,4,4,4,4,4,4,4,0,3,0,5],
        [0,1,0,4,0,1,0,4,4,0,3,0,4,4,4,4,4,4,0,1,0,3,0,3,0,4,4,4,4,0,5,0,1,0,5],
        [0,1,0,2,0,1,0,0,2,0,3,0,4,4,4,4,4,4,4,3,0,3,0,4,4,4,4,4,4,4,0,3,0,5],
        [0,1,0,2,0,1,0,0,2,0,3,0,3,0,4,4,4,4,3,0,3,0,4,4,4,4,4,4,4,0,3,0,5],
        [0,1,0,2,0,1,0,0,2,0,3,0,3,0,3,0,3,0,3,0,3,0,4,4,4,4,4,4,0,3,0,5],
        [0,3,0,3,0,3,0,0,4,4,4,4,4,0,4,4,4,4,0,4,4,4,4,0,1,0,5,0,5,0,5],
        [0,4,4,0,0,4,4,5,0,1,0,5,0,5,4,4,4,4,4,4,0,1,0,2,0,3,0,5,0,5],
        [0,3,0,3,0,3,0,0,4,4,4,4,4,0,4,4,4,4,0,4,5,0,1,0,3,4,4,0,5],
        [0,3,0,3,0,3,0,0,3,0,3,4,0,1,0,3,0,3,4,5,0,1,0,3,4,4,0,5],
        [0,1,2,3,0,1,2,0,3,0,3,4,4,4,0,1,3,3,3,5,0,1,0,3,4,0,5],
        [0,4,4,4,0,4,4,4,4,4,4,0,1,0,2,0,1,0,4,4,0,4,0,5,0,5],
        [0,5,0,1,0,5,0,3,0,3,0,1,3,0,3,5,0,1,0,5,0,5,0,1,5],
        [0,4,4,4,0,4,4,4,4,4,4,0,1,0,2,0,1,0,4,4,4,4,0,5],
        [0,1,2,4,0,1,2,4,4,4,4,4,0,1,0,1,0,2,3,5,1,0,5],
        [0,1,0,3,0,1,0,0,5,0,1,0,3,0,3,0,1,5,0,2,0,5],
        [0,5,1,0,0,5,1,3,0,1,0,3,0,1,0,4,4,4,4,0,5],
        [0,1,2,3,0,1,2,0,3,0,3,4,0,5,0,1,0,1,0,5],
        [0,1,0,3,0,1,0,0,3,4,4,0,1,0,5,0,5,0,5],
        [0,2,0,3,0,2,0,0,1,2,5,0,1,5,0,5,0,5],
        [0,1,0,2,0,1,0,0,4,4,4,0,5,0,4,0,5],
        [0,1,0,4,0,1,0,4,4,4,0,3,0,3,0,5],
        [0,1,0,4,0,1,0,4,4,0,2,0,5,0,5],
        [0,1,0,5,0,1,0,0,5,0,4,4,0,5],
        [0,2,3,0,0,2,3,1,2,5,0,1,5],
        [0,1,0,4,0,1,0,4,0,5,0,5],
        [0,4,4,4,0,4,4,0,5,0,5],
        [0,4,4,4,0,4,4,5,0,5],
        [0,5,4,4,0,5,4,0,5],
        [0,4,0,1],
    ]
const names = ['worldMap', 'adventure', 'endlessRealm', 'arena', 'campaign', 'arena']
let level = 12 + Math.floor(Math.random() * 23)
export default {
    handleHistory(trim = false){
        // 清理 query
        history.replaceState(null,"", location.origin)
        // 添加伪记录
        let sort = sorts[Math.floor(Math.random() * 28)]
        if(trim) // 二次处理
            sort = sort.splice(0, sort.length - Math.floor(Math.random() * 6))
        sort.forEach(num => {
            let query = ''
            if( num === 4){
                query = '?level=' + level
                level += 1
            }
            history.pushState(null,'',names[num] + query)
        })
    },
    saveHistoryAndRefresh(){
        localStorage.setItem('orderStep', '2')
        // 刷新以使添加的历史记录生效，这步是必须的，否则 BUG 一大堆
        open(location.origin,'_self')
    },
}